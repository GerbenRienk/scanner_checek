<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head><link rel="stylesheet" href="style.css" type="text/css" />
</head>
<body>
<script src="jquery.min.js"></script>



<table border="0" cellpadding="0" cellspacing="0">
    <tr class="aka_stripes">
        <td class="aka_header_border"><b>Title:&nbsp;Main</b> </td>
    </tr>
    
    <tr class="aka_stripes">
            
        <td class="aka_header_border" colspan="2">
            <table border="0" cellpadding="0" cellspacing="0" style="margin-bottom: 6px;">
                <tr>

                    <td valign="bottom" nowrap="nowrap" style="padding-right: 50px">

                        <a name="top">Page: </a>
                    </td>
                    <td align="right" valign="bottom">
                                            </td>
                </tr>
            </table>
        </td>
    </tr>

	<tr>
    <td class="table_cell_left">
        <table border="0" >
            <tr>
		                	<td valign="top">
                    			<table border="0" cellspacing="0" cellpadding="1">
                    			<tr>
                    		
                    	

                            <td valign="top" class="aka_ques_block"></td>
                            <td valign="top" class="aka_text_block">
		Date
                                </td>

                            <td valign="top" nowrap="nowrap">
  <label for="input480"></label>
  
    
    
      <input id="input480" tabindex="1" onchange="this.className='changedField'; destNonRepInstant('480', '', '---'); javascript:setImageWithTitle('DataStatus_top','images/icon_UnsavedData.gif','Data has been entered, but not saved.'); javascript:setImageWithTitle('DataStatus_bottom','images/icon_UnsavedData.gif', 'Data has been entered, but not saved.');" type="text" name="input480" value="28-Dec-2017" />
    
  
  <!-- date type-->
    <a href="#" onmouseover="Calendar.setup({inputField  : getSib(this.previousSibling), ifFormat    : '%d-%b-%Y', button      : 'anchor480' });"
       name="anchor480" id="anchor480">
        </a>
        </td>
	    <td valign="top">
	    <a tabindex="1001" href="#"   onmouseover="callTip(genToolTips_ItemInput(480));" onmouseout="UnTip()" onclick="openDNWindow('CreateDiscrepancyNote?isGroup=-1&eventCRFId=108&subjectId=18&itemId=480&groupLabel=&sectionId=153&id=1901&name=itemData&field=input480&column=value&enterData=1&errorFlag=&eventName=Allergies&eventDate=2017-12-28 12:00:00.0&crfName=TDS: CRF for allergenes v.1','spanAlert-input480',''); return false;">
	    
	    </a>
                            </td>
                            <td valign="top">
                                </td>
                        </tr>
                            
                            
                    </table>
                </td>
</tr>
</table>
</td>

</tr>
	<tr>
    <td class="table_cell_left">
        <table border="0" >
            <tr>
		                	<td valign="top">
                    			<table border="0" cellspacing="0" cellpadding="1">
                    			<tr>
                            <td valign="top" class="aka_ques_block"></td>
                            <!--
                            <td valign="top" class="aka_text_block">Allergens</td>
                            -->
                            <td valign="top" class="aka_text_block">
		Allergens
                                </td>

                            <td valign="top" nowrap="nowrap">
      <textarea id="input481" tabindex="2"  name="input481" rows="5" cols="40">
code1
code2
code2
code4
</textarea></td>
	    <td valign="top">
	    <a tabindex="1002" href="#"   onmouseover="callTip(genToolTips_ItemInput(481));" onmouseout="UnTip()"> 
	    </a>
	    </td>
		<td>
		
and a button <br />
<input type="button" id="scancheck" value="check and reformat scans" />
		
<script src="jquery.min.js"></script>
<script>
$.noConflict();
jQuery(document).ready(function($) { 
	// set the minimum length of a barcode
	var minimum_length = 4;
	// make reference to the scanner field, using the button named scancheck
	var barcodes = $('#scancheck').parent().parent().find("textarea");
	var barcodes_array = [];
	
	// add function check and reformat to the button
	$("#scancheck").click(function(){
        // close this window
        check_and_reformat();
     });
	
	function check_and_reformat(){
		// use a temporary variable to manipulate the content
		var temp = $(barcodes).val();
		// replace spaces with new-lines
		temp = temp.replace(/ +/g, '\n');
		barcodes_array = temp.split('\n');
		// make the elements of the array unique
		barcodes_array = array_unique(barcodes_array);
		var result = '';
		for ( var i = 0 ; i < barcodes_array.length ; ++i ) {
			result = result + barcodes_array[i] + '\n';
		}
		$(barcodes).val(result);
	}	

	function array_unique(array) {
	    var unique = [];
	    for ( var i = 0 ; i < array.length ; ++i ) {
	    	// console.log('checking ' + array[i] + ', ' + array[i].length);
	        if ( unique.indexOf(array[i]) == -1 ){
	            // only include if greater than the minimum length
	            if (array[i].length > minimum_length){
	            	unique.push(array[i]);	
	            }
	        }
	    }
	    // also sort the result
	    unique = unique.sort();
	    return unique;
	}
})
</script>
	                                </td>
                        </tr>                         
                    </table>
                </td>
            </tr>
        </table>
    </td>

</tr>

<tr><td>
        <table border="0" >
            <tr>
		                	<td valign="top">
                    			<table border="0" cellspacing="0" cellpadding="1">
                    			<tr>
                    		
                    	

                            <td valign="top" class="aka_ques_block"></td>
                            <td valign="top" class="aka_text_block">
Summary
                                </td>

                            <td valign="top" nowrap="nowrap">
  <label for="input485"></label>
  
    
    
      <textarea id="input4888" tabindex="3"  name="input481" rows="5" cols="40">sum</textarea>
    
  
  
    
        </td>
	    <td valign="top">
	    <a tabindex="1001" href="#"   onmouseover="callTip(genToolTips_ItemInput(480));" onmouseout="UnTip()" onclick="openDNWindow('CreateDiscrepancyNote?isGroup=-1&eventCRFId=108&subjectId=18&itemId=480&groupLabel=&sectionId=153&id=1901&name=itemData&field=input480&column=value&enterData=1&errorFlag=&eventName=Allergies&eventDate=2017-12-28 12:00:00.0&crfName=TDS: CRF for allergenes v.1','spanAlert-input480',''); return false;">
	    
	    </a>
                            </td>
                            <td valign="top">
                            <div id="BS">Beacon for summary field</div>
<script src="jquery.min.js"></script>
<script>
$.noConflict();
jQuery(document).ready(function($) { 
	var oc_summary = $("#BS").parent().parent().find("textarea");
	$(oc_summary).attr("cols","100");
	$(oc_summary).attr("rows","20");
})
</script>
                                </td>
                        </tr>
                            
                            
                    </table>
                </td>
</tr>
</table>

</td></tr>
</table>
</body>
</html>